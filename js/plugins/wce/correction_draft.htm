<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>{#wce.reading_title}</title>
	<script type="text/javascript" src="../../tiny_mce_popup.js"></script>
	<script type="text/javascript" src="../../jquery.js"></script>
	<script type="text/javascript" src="js/wce.js"></script> 
<!--<style type="text/css" media="screen">
    .xbtooltip {
      display: none;
      position: absolute;
      background-color: #ffff00;
    }
</style>-->
</head>

<body id="table" style="display: none" onload="init();">
	<form onsubmit="insertTable();return false;" action="#" name="readinginfo">
		<fieldset>
			<legend>{#wce.reading_data}</legend>
				<table border="0" cellpadding="4" cellspacing="0" width="100%">
					<tr>
						

					</tr>
				</table>
					  
					  
					  
					  
					  
					  
					  
					  
					  
					  
					  
					  
					  <table border="0" cellpadding="4" cellspacing="0" width="100%">
							  <tr>
								<td><label id="reading_label" for="reading">{#wce.reading_type}</label></td>
								<td colspan="2"><select id="reading" name="reading">
		  						    <option value="rdg_corr">{#wce.correction}</option>
									<option value="rdg_comm">{#wce.commentary}</option>
									<option value="rdg_alt">{#wce.alternative}</option>
									</select></td>
							  </tr>
							  <tr>
								<td><label id="firsthand_label" for="firsthand_reading">First hand reading</label></td>
								<td colspan="2"><label id="firsthand_reading" style="color: green"/></td>
							  </tr>
							  <tr>
								<td><label id="corrector_name_label" for="corrector_name" onmouseover="XBT(this, {id:'corrname'})">{#wce.corrector_name}</label></td>
								<td><select id="corrector_name" name="corrector_name" onclick="checkstatus_hand()">
		  						    <option value=""></option>
									<option value="{#wce.firsthand}">{#wce.firsthand}</option>
									<option value="{#wce.corrector}">{#wce.corrector}</option>
									<option value="{#wce.corrector}2">{#wce.corrector}2</option>
									<option value="{#wce.corrector}3">{#wce.corrector}3</option>
									<option value="hand_other">{#wce.other}</option>
									</select></td>
							  	<td><input id="corrector_other" name="corrector_other" type="text" value="" size="30" maxlength="" class="required number min1 mceFocus"/></td>
							  </tr>
							  <div id="corrname" class="xbtooltip">
								{#wce.tt_corrname}
							  </div>
							  <tr>
								<td><label id="corrector_text_label" for="corrector_text" onmouseover="XBT(this, {id:'corrtext'})">{#wce.corrector_text}</label></td>
								<td colspan="2" onclick="setCorrectionActive('1')">
									<textarea WRAP="PHYSICAL" ROWS="3" COLS="50" id="corrector_text" name="corrector_text"></textarea>
								</td>
							  </tr>
							  <div id="corrtext" class="xbtooltip">
								{#wce.tt_corrtext}
							  </div>
							  <!-- Second Correction -->
							  <tr>
								<td><label id="corrector_name_second_label" for="corrector_name_second" onmouseover="XBT(this, {id:'corrname'})">{#wce.corrector_name}</label></td>
								<td><select id="corrector_name_second" name="corrector_name_second" onclick="checkstatus_hand_second()">
									<option value=""></option>
									<option value="{#wce.firsthand}">{#wce.firsthand}</option>
									<option value="{#wce.corrector}">{#wce.corrector}</option>
									<option value="{#wce.corrector}2">{#wce.corrector}2</option>
									<option value="{#wce.corrector}3">{#wce.corrector}3</option>
									<option value="hand_other">{#wce.other}</option>
									</select></td>
							  	<td><input id="corrector_second_other" name="corrector_second_other" type="text" value="" size="30" maxlength="" class="required number min1 mceFocus"/></td>
							  </tr>
							  <div id="corrname" class="xbtooltip">
								{#wce.tt_corrname}
							  </div>
							  <tr>
								<td><label id="corrector_text_second_label" for="corrector_text_second" onmouseover="XBT(this, {id:'corrtext'})">{#wce.corrector_text}</label></td>
								<td colspan="2" onclick="setCorrectionActive('2')">
									<textarea WRAP="PHYSICAL" ROWS="3" COLS="50" id="corrector_text_second" name="corrector_text_second"></textarea>
								</td>
							  </tr>
							  <div id="corrtext" class="xbtooltip">
								{#wce.tt_corrtext}
							  </div>
							  <tr>
								<td><label id="place_corr_label" for="place_corr">{#wce.corrector_place}</label></td>
								<td colspan="2"><select id="place_corr" name="place_corr">
		  						    <option value="overwritten">{#wce.corr_overwritten}</option>
									<option value="above">{#wce.corr_above}</option>
									<option value="below">{#wce.corr_below}</option>
									<option value="lmargin">{#wce.corr_lmargin}</option>
									<option value="rmargin">{#wce.corr_rmargin}</option>
									<option value="above">{#wce.corr_top}</option>
									<option value="top">{#wce.corr_bottom}</option>
									<option value="bottom">{#wce.corr_elsewhere}</option>
									</select></td>
							  </tr>
							  <tr>
								<td><label id="deletion_label" for="deletion">{#wce.deletion}</label></td>
								<td colspan="2"><select id="deletion" name="deletion">
		  						    <option value="erased">{#wce.del_erased}</option>
									<option value="underline">{#wce.del_underline}</option>
									<option value="underdot">{#wce.del_underdot}</option>
									<option value="strikethrough">{#wce.del_striketrough}</option>
									<option value="vertical_line">{#wce.del_vertical_line}</option>
									<option value="Other">{#wce.other}</option>
									</select></td>
							  </tr>
							  <tr>
								<td><label id="editorial_note_label" for="editorial_note">{#wce.editorial_note}</label></td>
								<td colspan="2">
								  <textarea WRAP="PHYSICAL" ROWS="3" COLS="50" id="editorial_note" name="editorial_note"></textarea>
								</td>
							 </tr>
						</table>
					</fieldset>
		<div class="mceActionPanel">
			<input type="button" id="insert" name="insert" value="{#insert}" onclick="addWceInfo('wce_corr');" />
			<input type="button" id="cancel" name="cancel" value="{#cancel}" onclick="tinyMCEPopup.close();" />
		</div>
	</form>
</body>
<script type="text/javascript">  
		
		function init(){
			checkstatus_hand();
			checkstatus_hand_second();
			readWceInfo();
			setFirsthandReading();
		}
		
		function checkstatus_hand(){
			if(document.readinginfo.corrector_name.options[4].selected == true){
				document.readinginfo.corrector_other.disabled = false;
				document.getElementById('corrector_other').style.backgroundColor = "white";
			}
			else {
				document.readinginfo.corrector_other.disabled = true;
				document.getElementById('corrector_other').style.backgroundColor = "#CCCCCC";
			}
			
		}

		function checkstatus_hand_second(){
			if(document.readinginfo.corrector_name_second.options[4].selected == true){
				document.readinginfo.corrector_second_other.disabled = false;
				document.getElementById('corrector_second_other').style.backgroundColor = "white";
			}
			else {
				document.readinginfo.corrector_second_other.disabled = true;
				document.getElementById('corrector_second_other').style.backgroundColor = "#CCCCCC";
			}
			
		}

		function setFirsthandReading(){
			document.getElementById("firsthand_reading").innerHTML= ed.selection.getContent();
			document.readinginfo.corrector_text.value = ed.selection.getContent();
			document.getElementById("corrector_text").style.color = "gray";
			document.getElementById("corrector_text").style.fontStyle = "italic";
			document.readinginfo.corrector_text_second.value = ed.selection.getContent();
			document.getElementById("corrector_text_second").style.color = "gray";
			document.getElementById("corrector_text_second").style.fontStyle = "italic";
		}
		
		function setCorrectionActive(id){
			switch (id)
			{
			case '1' :
				document.getElementById("corrector_text").style.color = "blue";
				document.getElementById("corrector_text").style.fontStyle = "normal";
				break;
			case '2' :
				document.getElementById("corrector_text_second").style.color = "blue";
				document.getElementById("corrector_text_second").style.fontStyle = "normal";
			}
		}
		 

		//$(document).ready(readWceInfo);
		
</script>
</html>
